{% extends "base.html" %}

{% block title %}Driver Dashboard | U-Ride{% endblock %}

{% block content %}
<div class="card driver-dashboard">
    <div class="card-header-row">
        <h2 class="card-title">Driver Dashboard</h2>
        <span class="status-pill {% if driver.is_online %}status-online{% else %}status-offline{% endif %}">
            {% if driver.is_online %}Online{% else %}Offline{% endif %}
        </span>
    </div>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="flash flash-success">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
    {% endif %}
    {% endwith %}

    <div class="driver-info">
        <p><strong>Name:</strong> {{ driver.name }}</p>
        <p><strong>License:</strong> {{ driver.license_number }}</p>
        <p><strong>Vehicle:</strong> {{ driver.vehicle_info }}</p>
        <p>
            <strong>Verification Status:</strong>
            <span class="badge
                {% if driver.verification_status == 'approved' %}badge-approved
                {% elif driver.verification_status == 'rejected' %}badge-rejected
                {% else %}badge-pending
                {% endif %}
            ">
                {{ driver.verification_status | capitalize }}
            </span>
        </p>
    </div>

    {% if driver.verification_status == "approved" %}
        <form method="POST"
              action="{{ url_for('driver_toggle') }}"
              class="toggle-form">
            <button type="submit" class="btn btn-primary">
                {% if driver.is_online %}
                    Go Offline
                {% else %}
                    Go Online
                {% endif %}
            </button>
        </form>
    {% else %}
        <p class="warning">
            You cannot go online until an admin approves your account.
        </p>
    {% endif %}
</div>
{% endblock %}
